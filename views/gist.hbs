<div class="container">
  <strong class="text-muted">{{gist.language}}</strong>
  <a href="/gist/{{gist.id}}/raw" class="pull-right">Raw</a>
  <div id="contents">{{gist.contents}}</div>
</div>
<script>
  var modes = {
    {{#each languages}}
      '{{name}}': '{{mode}}',
    {{/each}}
  };

  var highlighter = ace.require('ace/ext/static_highlight');
  var dom = ace.require('ace/lib/dom');

  var mode = 'ace/mode/' + modes['{{gist.language}}'];
  var theme = 'ace/theme/gist';
  var data = $('#contents').text();

  highlighter.render(data, mode, theme, 1, true, function (highlighted) {    
    dom.importCssString(highlighted.css, "ace_highlight");
    $('#contents').html(highlighted.html);
  });
</script>