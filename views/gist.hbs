<div class="container">
  <strong class="text-muted">{{language}}</strong>
  <a href="/gist/{{id}}/raw" class="pull-right">Raw</a>
  <div id="contents">{{contents}}</div>
</div>
<script>
  var modes = {
    'C++': 'c_cpp',
    'CSS': 'css',
    'HTML': 'html',
    'JavaScript': 'javascript',
    'Perl': 'perl',
    'Python': 'python',
    'Ruby': 'ruby',
    'Shell': 'sh',
    'SQL': 'sql',
    'Text': 'text'
  };

  var highlighter = ace.require('ace/ext/static_highlight');
  var dom = ace.require('ace/lib/dom');

  var mode = 'ace/mode/' + modes['{{language}}'];
  var theme = 'ace/theme/xcode';
  var data = $('#contents').text();

  highlighter.render(data, mode, theme, 1, true, function (highlighted) {    
    dom.importCssString(highlighted.css, "ace_highlight");
    $('#contents').html(highlighted.html);
  });
</script>